nv.models.stackedArea=function(){var margin={top:0,right:0,bottom:0,left:0},width=960,height=500,id=Math.floor(Math.random()*100000),getX=function(d){return d.x;},getY=function(d){return d.y;},style='stack',offset='zero',order='default',interpolate='linear',clipEdge=false,x,y,scatter=nv.models.scatter(),color=nv.utils.defaultColor(),fill=color,classes=function(d,i){return'nv-area nv-area-'+i;},dispatch=d3.dispatch('tooltipShow','tooltipHide','tooltipMove','areaClick','areaMouseover','areaMouseout','areaMousemove');scatter.size(2.2).sizeDomain([2.2]);function chart(selection){selection.each(function(data){var availableWidth=width-margin.left-margin.right,availableHeight=height-margin.top-margin.bottom,container=d3.select(this);x=scatter.xScale();y=scatter.yScale();data=data.map(function(aseries,i){aseries.values=aseries.values.map(function(d,j){d.index=j;d.stackedY=aseries.disabled?0:getY(d,j);return d;});return aseries;});data=d3.layout.stack().order(order).offset(offset).values(function(d){return d.values;}).x(getX).y(function(d){return d.stackedY;}).out(function(d,y0,y){d.display={y:y,y0:y0};})
(data);var wrap=container.selectAll('g.nv-wrap.nv-stackedarea').data([data]);var wrapEnter=wrap.enter().append('g').attr('class','nvd3 nv-wrap nv-stackedarea');var defsEnter=wrapEnter.append('defs');var gEnter=wrapEnter.append('g');var g=wrap.select('g');chart.gradient=function(d,i,p){return nv.utils.colorLinearGradient(d,id+'-'+i,p,color(d,i),wrap.select('defs'));};gEnter.append('g').attr('class','nv-areaWrap');gEnter.append('g').attr('class','nv-scatterWrap');wrap.attr('transform','translate('+margin.left+','+margin.top+')');scatter.width(availableWidth).height(availableHeight).x(getX).y(function(d){return d.display.y+d.display.y0;}).forceY([0]);var scatterWrap=g.select('.nv-scatterWrap').datum(data.filter(function(d){return!d.disabled}));scatterWrap.call(scatter);defsEnter.append('clipPath').attr('id','nv-edge-clip-'+id).append('rect');wrap.select('#nv-edge-clip-'+id+' rect').attr('width',availableWidth).attr('height',availableHeight);g.attr('clip-path',clipEdge?'url(#nv-edge-clip-'+id+')':'');var area=d3.svg.area().x(function(d,i){return x(getX(d,i));}).y0(function(d){return y(d.display.y0);}).y1(function(d){return y(d.display.y+d.display.y0);}).interpolate(interpolate);var zeroArea=d3.svg.area().x(function(d,i){return x(getX(d,i));}).y0(function(d){return y(d.display.y0);}).y1(function(d){return y(d.display.y0);});var path=g.select('.nv-areaWrap').selectAll('path.nv-area').data(function(d){return d;});path.enter().append('path').on('mouseover',function(d,i){d3.select(this).classed('hover',true);dispatch.areaMouseover({point:d,series:d.key,pos:[d3.event.pageX,d3.event.pageY],seriesIndex:i});}).on('mouseout',function(d,i){d3.select(this).classed('hover',false);dispatch.areaMouseout({point:d,series:d.key,pos:[d3.event.pageX,d3.event.pageY],seriesIndex:i});}).on('click',function(d,i){d3.select(this).classed('hover',false);dispatch.areaClick({point:d,series:d.key,pos:[d3.event.pageX,d3.event.pageY],seriesIndex:i});});path.exit().attr('d',function(d,i){return zeroArea(d.values,i);}).remove();path.attr('class',function(d,i){return this.getAttribute('class')||classes(d,i);}).attr('fill',function(d,i){return d.color||fill(d,i);}).attr('stroke',function(d,i){return d.color||fill(d,i);});path.attr('d',function(d,i){return area(d.values,i);});scatter.dispatch.on('elementMouseover.area',function(e){g.select('.nv-chart-'+id+' .nv-area-'+e.seriesIndex).classed('hover',true);});scatter.dispatch.on('elementMouseout.area',function(e){g.select('.nv-chart-'+id+' .nv-area-'+e.seriesIndex).classed('hover',false);});});return chart;}
scatter.dispatch.on('elementClick.area',function(e){dispatch.areaClick(e);});scatter.dispatch.on('elementMouseover.tooltip',function(e){e.pos=[e.pos[0]+margin.left,e.pos[1]+margin.top],dispatch.tooltipShow(e);});scatter.dispatch.on('elementMouseout.tooltip',function(e){dispatch.tooltipHide(e);});chart.dispatch=dispatch;chart.scatter=scatter;d3.rebind(chart,scatter,'interactive','size','xScale','yScale','zScale','xDomain','yDomain','sizeDomain','forceX','forceY','forceSize','clipVoronoi','clipRadius');chart.color=function(_){if(!arguments.length)return color;color=_;scatter.color(color);return chart;};chart.fill=function(_){if(!arguments.length)return fill;fill=_;scatter.fill(fill);return chart;};chart.classes=function(_){if(!arguments.length)return classes;classes=_;scatter.classes(classes);return chart;};chart.gradient=function(_){if(!arguments.length)return gradient;gradient=_;return chart;};chart.x=function(_){if(!arguments.length)return getX;getX=d3.functor(_);return chart;};chart.y=function(_){if(!arguments.length)return getY;getY=d3.functor(_);return chart;};chart.margin=function(_){if(!arguments.length)return margin;margin.top=typeof _.top!='undefined'?_.top:margin.top;margin.right=typeof _.right!='undefined'?_.right:margin.right;margin.bottom=typeof _.bottom!='undefined'?_.bottom:margin.bottom;margin.left=typeof _.left!='undefined'?_.left:margin.left;return chart;};chart.width=function(_){if(!arguments.length)return width;width=_;return chart;};chart.height=function(_){if(!arguments.length)return height;height=_;return chart;};chart.clipEdge=function(_){if(!arguments.length)return clipEdge;clipEdge=_;return chart;};chart.offset=function(_){if(!arguments.length)return offset;offset=_;return chart;};chart.order=function(_){if(!arguments.length)return order;order=_;return chart;};chart.style=function(_){if(!arguments.length)return style;style=_;switch(style){case'stack':chart.offset('zero');chart.order('default');break;case'stream':chart.offset('wiggle');chart.order('inside-out');break;case'stream-center':chart.offset('silhouette');chart.order('inside-out');break;case'expand':chart.offset('expand');chart.order('default');break;}
return chart;};chart.interpolate=function(_){if(!arguments.length)return interpolate;interpolate=_;return interpolate;};return chart;}